!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Clappr")):"function"==typeof define&&define.amd?define(["Clappr"],t):"object"==typeof exports?exports.RTMP=t(require("Clappr")):e.RTMP=t(e.Clappr)}(this,function(e){return function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var a=n(1),r=i(a);e.exports=window.RTMP=r["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e,t,n){for(var i=!0;i;){var a=e,r=t,o=n;i=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(o)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=r,n=o,i=!0,s=u=void 0}},l=n(2),u=n(3),p=i(u),c=n(4),f=i(c),h=n(5),d=i(h),g=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.options=e,this.options.rtmpConfig.wmode=e.rtmpConfig.wmode||"transparent",this.options.rtmpConfig.bufferTime=e.rtmpConfig.bufferTime||.1,this.options.rtmpConfig.scaling=e.rtmpConfig.scaling||"letterbox",this.options.rtmpConfig.playbackType=this.options.rtmpConfig.playbackType||this.options.src.indexOf("live")>-1,this.options.rtmpConfig.startLevel=this.options.rtmpConfig.startLevel||0,this.setupPlaybackType()}return r(t,e),o(t,[{key:"name",get:function(){return"rtmp"}},{key:"tagName",get:function(){return"object"}},{key:"template",get:function(){return p["default"](f["default"])}},{key:"attributes",get:function(){return{"data-rtmp":"",type:"application/x-shockwave-flash",width:"100%",height:"100%"}}}]),o(t,[{key:"getPlaybackType",value:function(){return this.options.rtmpConfig.playbackType}},{key:"addListeners",value:function(){l.Mediator.on(this.uniqueId+":progress",this.progress,this),l.Mediator.on(this.uniqueId+":timeupdate",this.updateTime,this),l.Mediator.on(this.uniqueId+":statechanged",this.checkState,this),l.Mediator.on(this.uniqueId+":flashready",this.bootstrap,this)}},{key:"stopListening",value:function(){s(Object.getPrototypeOf(t.prototype),"stopListening",this).call(this),l.Mediator.off(this.uniqueId+":progress"),l.Mediator.off(this.uniqueId+":timeupdate"),l.Mediator.off(this.uniqueId+":statechanged"),l.Mediator.off(this.uniqueId+":flashready")}},{key:"bootstrap",value:function(){this.el.width="100%",this.el.height="100%",this.isReady=!0,this.trigger(l.Events.PLAYBACK_READY,this.name),this.options.autoPlay&&this.play()}},{key:"updateTime",value:function(){"live"===this.getPlaybackType()?this.trigger(l.Events.PLAYBACK_TIMEUPDATE,1,1,this.name):this.trigger(l.Events.PLAYBACK_TIMEUPDATE,this.el.getPosition(),this.el.getDuration(),this.name)}},{key:"setupPlaybackType",value:function(){"live"===this.getPlaybackType()&&(this.settings={left:["playpause"],"default":["seekbar"],right:["fullscreen","volume"]},this.settings.seekEnabled=!1,this.trigger(l.Events.PLAYBACK_SETTINGSUPDATE))}},{key:"render",value:function(){this.$el.html(this.template({cid:this.cid,swfPath:this.swfPath,playbackId:this.uniqueId,wmode:this.options.rtmpConfig.wmode,scaling:this.options.rtmpConfig.scaling,bufferTime:this.options.rtmpConfig.bufferTime,playbackType:this.options.rtmpConfig.playbackType,startLevel:this.options.rtmpConfig.startLevel})),l.Browser.isIE?(this.$("embed").remove(),l.Browser.isLegacyIE&&this.$el.attr("classid",IE_CLASSID)):l.Browser.isFirefox&&this.setupFirefox(),this.el.id=this.cid;var e=l.Styler.getStyleFor(d["default"]);return this.$el.append(e),this}},{key:"swfPath",get:function(){return this.options.rtmpConfig.swfPath?this.options.rtmpConfig.swfPath:"//cdn.jsdelivr.net/clappr.rtmp/latest/assets/RTMP.swf"}},{key:"currentLevel",get:function(){return this.el.getCurrentLevel()},set:function(e){this.el.setLevel(e)}},{key:"autoSwitchLevels",get:function(){return this.el.isAutoSwitchLevels()},set:function(e){this.el.setAutoSwitchLevels(e)}},{key:"isDynamicStream",get:function(){return this.el.isDynamicStream()}}]),t}(l.Flash);t["default"]=g,g.canPlay=function(e){return!(!(e.indexOf("rtmp://")>-1||e.indexOf(".smil")>-1)||!l.Browser.hasFlash)},g.debug=function(e){return console.log(e)},e.exports=t["default"]},function(t,n){t.exports=e},function(e,t,n){var i,a;!function(n){var r={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},o=/(.)^/,s={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},l=/\\|'|\r|\n|\t|\u2028|\u2029/g,u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},p=new RegExp("[&<>\"']","g"),c=function(e){return null==e?"":(""+e).replace(p,function(e){return u[e]})},f=0,h=function(e,t){var n,i=new RegExp([(r.escape||o).source,(r.interpolate||o).source,(r.evaluate||o).source].join("|")+"|$","g"),a=0,u="__p+='";e.replace(i,function(t,n,i,r,o){return u+=e.slice(a,o).replace(l,function(e){return"\\"+s[e]}),n&&(u+="'+\n((__t=("+n+"))==null?'':escapeExpr(__t))+\n'"),i&&(u+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(u+="';\n"+r+"\n__p+='"),a=o+t.length,t}),u+="';\n",r.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n//# sourceURL=/microtemplates/source["+f++ +"]";try{n=new Function(r.variable||"obj","escapeExpr",u)}catch(p){throw p.source=u,p}if(t)return n(t,c);var h=function(e){return n.call(this,e,c)};return h.source="function("+(r.variable||"obj")+"){\n"+u+"}",h};h.settings=r,i=[],a=function(){return h}.apply(t,i),!(void 0!==a&&(e.exports=a))}(void 0)},function(e,t){e.exports='<param name=movie value="<%= swfPath %>?inline=1"><param name=quality value=autohigh><param name=swliveconnect value=true><param name=allowScriptAccess value=always><param name=allownetworking value=all><param name=bgcolor value=#000000><param name=allowFullScreen value=false><param name=wmode value="<%= wmode %>"><param name=tabindex value=1><param name=FlashVars value="playbackId=<%= playbackId %>&scaling=<%= scaling %>&bufferTime=<%= bufferTime %>&playbackType=<%= playbackType %>&startLevel=<%= startLevel %>"><embed name="<%= cid %>" type=application/x-shockwave-flash disabled tabindex=-1 enablecontextmenu=false allowscriptaccess=always allownetworking=all quality=autohigh pluginspage=http://www.macromedia.com/go/getflashplayer wmode="<%= wmode %>" swliveconnect=true allowfullscreen bgcolor=#000000 flashvars="playbackId=<%= playbackId %>&scaling=<%= scaling %>&bufferTime=<%= bufferTime %>&playbackType=<%= playbackType %>&startLevel=<%= startLevel %>" src="<%= swfPath %>" width=100% height=100%>'},function(e,t){e.exports=".clappr-flash-playback[data-flash-playback]{display:block;position:absolute;top:0;left:0;height:100%;width:100%;pointer-events:none}\n"}])});
//# sourceMappingURL=rtmp.min.js.map